<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>4円パチンコ 海シリーズ（2025/10→11）影響度検証レポート</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    :root {
      --bg:#0b0f14; --card:#111824; --muted:#8ea0b6; --text:#e8eef7; --border:#223044;
      --good:#52d273; --bad:#ff6b6b; --warn:#ffd166;
    }
    body { margin:0; font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans JP","Hiragino Sans","Yu Gothic",sans-serif;
           background:var(--bg); color:var(--text); }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 24px 16px 60px; }
    h1 { font-size: 22px; margin: 0 0 6px; }
    h2 { font-size: 16px; margin: 22px 0 10px; color:#d7e2f2; }
    p { margin: 6px 0; color: var(--muted); line-height: 1.6; }
    @media print { .wrap { max-width: 100%; } }
    .card { background: var(--card); border:1px solid var(--border); border-radius: 14px; padding: 14px 14px; }
    .kpi { display:grid; grid-template-columns: 1fr; gap: 10px; }
    @media (min-width: 700px) { .kpi { grid-template-columns: repeat(3, 1fr); } }
    .k { padding: 12px; border: 1px solid var(--border); border-radius: 12px; background: rgba(255,255,255,0.02); }
    .k .t { font-size: 12px; color: var(--muted); }
    .k .v { font-size: 18px; margin-top: 6px; }
    .tag { display:inline-block; padding: 2px 8px; border-radius: 999px; border:1px solid var(--border); font-size: 12px; color: var(--muted); }
    .tag.good { color: var(--good); }
    .tblwrap { overflow-x:auto; }
    table.tbl { width:100%; border-collapse: collapse; min-width: 760px; }
    .tbl th, .tbl td { border-bottom: 1px solid var(--border); padding: 10px 10px; font-size: 13px; white-space: nowrap; }
    .tbl th { text-align: left; color:#cfe0f7; font-weight: 600; }
    .small { font-size: 12px; color: var(--muted); }
    .foot { margin-top: 18px; font-size: 12px; color: var(--muted); }
    canvas { width: 100% !important; height: 320px !important; }
    .hr { height:1px; background: var(--border); margin: 14px 0; }
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>4円パチンコ「海シリーズ」影響度検証レポート</h1>
    <p>対象：<b>サンシャインKYORAKU植田</b>　期間：<b>2025/10/01〜2025/11/30</b>（日別）</p>
    <div class="hr"></div>

    <h2>総括（最終結論）</h2>
    <p>
      10月→11月にかけて海シリーズは商圏全体で<b>-17.5%</b>縮小しており（需要の目減りが主因）、
      <b>自店の海客数減少（-7.2%）は商圏平均より小さい</b>。
      一方で、商圏全体の波（休日/平日等）を差し引いた“残差”で見ると、
      <b>プレイランドキャッスル天白</b>が自店と最も強い逆相関（残差相関 <b>-0.489</b>）で、
      <b>自店の弱い日にキャッスルが強い日が複数確認</b>された。
      よって「海客が競合へ流れた」懸念は<b>部分的に成立</b>し、影響度最大の競合は<b>プレイランドキャッスル天白</b>と判断する。
    </p>

    <div class="kpi">
      <div class="k">
        <div class="t">海 客数（商圏合計）10月→11月</div>
        <div class="v"><b>1265.7</b> → <b>1044.32</b>（<span style="color:var(--bad)"><b>-17.5%</b></span>）</div>
      </div>
      <div class="k">
        <div class="t">海 客数（自店）10月→11月</div>
        <div class="v"><b>164.67</b> → <b>152.86</b>（<span style="color:var(--warn)"><b>-7.2%</b></span>）</div>
      </div>
      <div class="k">
        <div class="t">海 支持率（自店）10月平均→11月平均</div>
        <div class="v"><b>103.39%</b> → <b>97.80%</b>（<span style="color:var(--bad)"><b>-5.59pt</b></span>）</div>
      </div>
    </div>
  </div>

  <h2>1) 月次比較（海客数：10月→11月）</h2>
  <div class="card">
    <p class="small">商圏縮小（-17.5%）の中で、<b>自店は-7.2%</b>。平針は-28.3%。東宝は11月ゼロ（閉店/店休）。</p>
    <div class="tblwrap"><table class="dataframe tbl">
  <thead>
    <tr style="text-align: left;">
      <th>店舗</th>
      <th>10月合計</th>
      <th>11月合計</th>
      <th>増減</th>
      <th>増減率</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>自店舗</td>
      <td>164.67</td>
      <td>152.86</td>
      <td>-11.81</td>
      <td>-7.2</td>
    </tr>
    <tr>
      <td>プレイランドキャッスル天白店</td>
      <td>456.82</td>
      <td>391.85</td>
      <td>-64.97</td>
      <td>-14.2</td>
    </tr>
    <tr>
      <td>サンシャインKYORAKU平針</td>
      <td>272.00</td>
      <td>195.15</td>
      <td>-76.85</td>
      <td>-28.3</td>
    </tr>
    <tr>
      <td>キング観光新瑞店</td>
      <td>192.66</td>
      <td>164.34</td>
      <td>-28.32</td>
      <td>-14.7</td>
    </tr>
    <tr>
      <td>キング会館 名東店</td>
      <td>44.16</td>
      <td>49.49</td>
      <td>5.33</td>
      <td>12.1</td>
    </tr>
    <tr>
      <td>タイホウ篭山店</td>
      <td>65.66</td>
      <td>57.01</td>
      <td>-8.65</td>
      <td>-13.2</td>
    </tr>
    <tr>
      <td>ダイエー高針店</td>
      <td>52.69</td>
      <td>33.67</td>
      <td>-19.02</td>
      <td>-36.1</td>
    </tr>
    <tr>
      <td>東宝プラザ野並店</td>
      <td>16.99</td>
      <td>0.00</td>
      <td>-16.99</td>
      <td>-100.0</td>
    </tr>
    <tr>
      <td>客数合計</td>
      <td>1265.70</td>
      <td>1044.32</td>
      <td>-221.38</td>
      <td>-17.5</td>
    </tr>
  </tbody>
</table></div>
  </div>

  <h2>2) 支持率の変化（海：10月平均→11月平均）</h2>
  <div class="card">
    <p class="small">自店は<b>-5.59pt</b>。キャッスル天白は<b>+3.30pt</b>で相対優位を維持。</p>
    <div class="tblwrap"><table class="dataframe tbl">
  <thead>
    <tr style="text-align: left;">
      <th>店舗</th>
      <th>10月平均</th>
      <th>11月平均</th>
      <th>前年差(pt)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>自店舗</td>
      <td>103.39</td>
      <td>97.80</td>
      <td>-5.59</td>
    </tr>
    <tr>
      <td>プレイランドキャッスル天白店</td>
      <td>156.90</td>
      <td>160.20</td>
      <td>3.30</td>
    </tr>
    <tr>
      <td>サンシャインKYORAKU平針</td>
      <td>155.23</td>
      <td>117.92</td>
      <td>-37.31</td>
    </tr>
    <tr>
      <td>キング観光新瑞店</td>
      <td>112.38</td>
      <td>100.12</td>
      <td>-12.26</td>
    </tr>
    <tr>
      <td>キング会館 名東店</td>
      <td>51.63</td>
      <td>60.54</td>
      <td>8.91</td>
    </tr>
  </tbody>
</table></div>
  </div>

  <h2>3) 日別推移（海客数）</h2>
  <div class="card">
    <p class="small">日別の波は大きい（休日要因）。次章で“商圏の波”を差し引いた残差で影響度を判定。</p>
    <canvas id="seaCust"></canvas>
  </div>

  <h2>4) 日別推移（海支持率）</h2>
  <div class="card">
    <p class="small">支持率は「客数シェア ÷ 台数シェア」。100%超は相対優位。</p>
    <canvas id="seaSupport"></canvas>
  </div>

  <h2>5) 影響度評価（残差相関：市場要因を除去）</h2>
  <div class="card">
    <p class="small">
      手順：各店の海客数を「商圏合計（海客数合計）」で回帰し、日別の残差同士の相関を算出。
      <b>負（マイナス）が強いほど</b>「自店が弱い日＝相手が強い日」になりやすい。
    </p>
    <div class="tblwrap"><table class="dataframe tbl">
  <thead>
    <tr style="text-align: left;">
      <th>競合店</th>
      <th>残差相関(自店vs競合)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>プレイランドキャッスル天白店</td>
      <td>-0.489</td>
    </tr>
    <tr>
      <td>タイホウ篭山店</td>
      <td>-0.214</td>
    </tr>
    <tr>
      <td>東宝プラザ野並店</td>
      <td>-0.202</td>
    </tr>
    <tr>
      <td>サンシャインKYORAKU平針</td>
      <td>-0.022</td>
    </tr>
    <tr>
      <td>ダイエー高針店</td>
      <td>-0.019</td>
    </tr>
    <tr>
      <td>キング会館 名東店</td>
      <td>-0.017</td>
    </tr>
    <tr>
      <td>キング観光新瑞店</td>
      <td>0.140</td>
    </tr>
  </tbody>
</table></div>
    <div class="hr"></div>
    <p class="small"><span class="tag good">結論</span> 最も強い逆相関：<b>プレイランドキャッスル天白</b>（-0.489）</p>
  </div>

  <h2>6) 代表的な“逆行日”（自店弱い × キャッスル強い）</h2>
  <div class="card">
    <p class="small">下表は「残差差（キャッスル−自店）」が大きい日（上位）。</p>
    <div class="tblwrap"><table class="dataframe tbl">
  <thead>
    <tr style="text-align: left;">
      <th>日付</th>
      <th>自店(海客数)</th>
      <th>キャッスル天白(海客数)</th>
      <th>残差差(キャッスル優位)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2025-11-01</td>
      <td>7.00</td>
      <td>38.00</td>
      <td>11.42</td>
    </tr>
    <tr>
      <td>2025-10-08</td>
      <td>3.00</td>
      <td>27.67</td>
      <td>11.11</td>
    </tr>
    <tr>
      <td>2025-10-22</td>
      <td>5.33</td>
      <td>25.00</td>
      <td>7.30</td>
    </tr>
    <tr>
      <td>2025-11-09</td>
      <td>3.00</td>
      <td>17.67</td>
      <td>6.60</td>
    </tr>
    <tr>
      <td>2025-10-21</td>
      <td>5.00</td>
      <td>22.33</td>
      <td>5.87</td>
    </tr>
    <tr>
      <td>2025-10-15</td>
      <td>5.00</td>
      <td>22.67</td>
      <td>5.40</td>
    </tr>
    <tr>
      <td>2025-11-25</td>
      <td>2.67</td>
      <td>10.00</td>
      <td>5.28</td>
    </tr>
    <tr>
      <td>2025-11-05</td>
      <td>4.00</td>
      <td>14.33</td>
      <td>3.98</td>
    </tr>
  </tbody>
</table></div>
  </div>

  <h2>7) 参考：散布図（海客数 自店×キャッスル天白）</h2>
  <div class="card">
    <p class="small">単純相関は“休日/平日”で同方向になりやすい。影響度判断は「残差相関」を採用。</p>
    <canvas id="scatter"></canvas>
  </div>

  <div class="foot card">
    <div><b>注記</b></div>
    <div>・本レポートは添付の日別帳票（4円海：客数/支持率）に基づく。</div>
    <div>・住所空白（閉店）店舗は、11月がゼロ/欠損になりやすいため「月次比較」に明示。</div>
    <div>・次アクション：海の再獲得施策は<b>キャッスル天白対策</b>を優先（海の台構成・導線・訴求）。</div>
  </div>
</div>

<script>
const dates = ["2025-10-01", "2025-10-02", "2025-10-03", "2025-10-04", "2025-10-05", "2025-10-06", "2025-10-07", "2025-10-08", "2025-10-09", "2025-10-10", "2025-10-11", "2025-10-12", "2025-10-13", "2025-10-14", "2025-10-15", "2025-10-16", "2025-10-17", "2025-10-18", "2025-10-19", "2025-10-20", "2025-10-21", "2025-10-22", "2025-10-23", "2025-10-24", "2025-10-25", "2025-10-26", "2025-10-27", "2025-10-28", "2025-10-29", "2025-10-30", "2025-10-31", "2025-11-01", "2025-11-02", "2025-11-03", "2025-11-04", "2025-11-05", "2025-11-06", "2025-11-07", "2025-11-08", "2025-11-09", "2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-15", "2025-11-16", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-22", "2025-11-23", "2025-11-24", "2025-11-25", "2025-11-26", "2025-11-27", "2025-11-28", "2025-11-29", "2025-11-30"];
const seaCustSeries = {"\u81ea\u5e97\u8217": [4.0, 3.0, 5.67, 7.0, 6.0, 3.0, 4.67, 3.0, null, 7.33, 10.33, 8.33, 8.0, 4.33, 5.0, 3.67, 8.67, 8.33, 7.0, 5.33, 5.0, 5.33, 4.0, 6.33, 7.67, 5.67, 3.67, 3.67, 4.67, 2.33, 3.67, 7.0, 7.67, 6.67, 2.67, 4.0, null, 5.0, 5.0, 3.0, 3.67, 3.67, 7.0, 4.33, 8.67, 8.67, 5.67, 2.33, 1.0, 3.67, 3.0, 3.67, 6.67, 9.0, 5.33, 2.67, 8.5, 5.0, 4.67, 8.33, 6.33], "\u30d7\u30ec\u30a4\u30e9\u30f3\u30c9\u30ad\u30e3\u30c3\u30b9\u30eb\u5929\u767d\u5e97": [13.33, 3.67, 6.33, 15.33, 17.0, 8.33, null, 27.67, 19.33, 11.67, 22.33, 21.67, 22.0, 10.33, 22.67, 14.67, 13.33, 17.0, 23.33, 9.5, 22.33, 25.0, 11.67, 9.0, 16.33, 19.33, 11.67, 11.33, 12.67, 11.0, 7.0, 38.0, 16.0, 18.33, 8.5, 14.33, 10.0, 10.0, 13.67, 17.67, 6.33, 10.0, 11.0, 8.0, 14.0, 18.67, 17.0, 9.67, null, 12.0, 10.0, 8.0, 12.67, 17.33, 14.67, 10.0, 14.0, 5.67, 9.67, 19.67, 17.0], "\u30b5\u30f3\u30b7\u30e3\u30a4\u30f3KYORAKU\u5e73\u91dd": [5.33, 5.33, 8.67, 11.67, 7.0, null, 15.0, 10.0, 12.0, 6.67, 12.33, 11.0, 8.67, 5.67, 8.67, 5.33, 8.67, 9.0, 10.67, 6.0, 6.67, 5.33, 15.67, 11.33, 11.0, 9.0, 7.33, 6.33, 13.0, 9.33, 9.33, 9.33, 10.0, 10.33, 3.5, 4.0, 7.33, 5.33, 8.33, 8.0, 4.0, 7.0, 7.0, 7.0, 8.67, 10.67, 10.0, 6.67, 4.67, 4.33, 3.33, 3.33, 5.33, 8.67, 6.0, null, 5.33, 6.0, 5.0, 8.33, 7.67], "\u30ad\u30f3\u30b0\u89b3\u5149\u65b0\u745e\u5e97": [5.0, 2.67, 2.33, 9.33, 5.67, 7.33, 5.33, 5.67, 5.67, 5.33, 9.33, 9.0, 6.0, 1.33, 7.67, 7.67, 7.67, 16.33, 7.0, 6.0, 7.33, 5.67, 5.0, 5.67, 11.33, 4.67, 5.0, 3.33, 4.0, 4.33, 4.0, 10.67, 5.33, 9.0, 4.33, 4.0, 3.67, 4.67, 7.33, 3.33, 5.0, 3.67, 6.33, 4.67, 5.67, 8.67, 9.67, 4.0, 2.0, 4.67, 1.33, 4.67, 10.67, 6.33, 6.0, 1.67, 5.0, 2.33, 5.33, 8.33, 6.0], "\u30ad\u30f3\u30b0\u4f1a\u9928 \u540d\u6771\u5e97": [1.33, 2.0, 1.0, 1.67, 2.0, 1.0, 1.67, 2.0, 0.67, 1.33, 1.0, 1.0, 4.33, 2.33, 0.67, 1.33, 1.33, 0.67, 1.0, 1.33, 0.5, 3.33, 2.0, 0.67, 1.67, 1.33, 0.0, 2.0, 1.0, 1.0, 1.0, 2.0, 3.0, 1.67, 3.0, 0.33, 1.33, 0.33, 2.33, 2.0, 1.0, 1.67, 0.33, 1.0, 1.0, 2.0, 1.0, 1.33, 1.5, 1.67, 1.0, 1.33, 2.33, 2.67, 2.67, 1.33, 2.0, 1.0, 2.67, 3.33, 0.67]};
const seaSupportSeries = {"\u81ea\u5e97\u8217": [103.38, 119.29, 176.46, 119.03, 124.06, 95.07, 104.73, 49.29, null, 159.25, 141.19, 122.1, 116.51, 131.74, 83.29, 81.07, 156.14, 114.51, 105.09, 115.51, 73.1, 73.47, 58.27, 118.75, 99.52, 85.63, 78.16, 83.43, 81.47, 47.73, 84.38, 66.24, 116.73, 88.24, 70.66, 86.19, null, 108.93, 79.7, 54.97, 110.6, 85.59, 131.97, 103.61, 145.24, 106.21, 77.16, 62.91, 40.4, 88.27, 96.3, 105.93, 110.5, 127.27, 91.73, 85.71, 145.56, 146.32, 100.55, 104.07, 98.55], "\u30d7\u30ec\u30a4\u30e9\u30f3\u30c9\u30ad\u30e3\u30c3\u30b9\u30eb\u5929\u767d\u5e97": [186.67, 78.97, 106.83, 141.23, 190.4, 143.05, null, 246.24, 189.58, 147.79, 178.01, 185.18, 186.9, 183.26, 220.26, 189.17, 140.12, 136.26, 204.35, 120.02, 190.48, 200.89, 99.15, 98.44, 123.68, 170.43, 145.07, 150.42, 128.99, 131.25, 93.96, 209.75, 142.11, 141.54, 150.14, 205.89, 145.68, 145.24, 145.24, 215.82, 127.36, 155.61, 138.26, 127.53, 156.41, 152.5, 154.32, 167.56, null, 185.71, 206.35, 148.57, 134.97, 157.58, 168.17, 214.29, 159.83, 110.55, 138.85, 163.74, 176.36], "\u30b5\u30f3\u30b7\u30e3\u30a4\u30f3KYORAKU\u5e73\u91dd": [119.47, 183.79, 233.9, 171.93, 125.44, null, 291.76, 142.41, 188.28, 135.12, 157.28, 150.42, 117.8, 160.79, 134.75, 110.06, 145.73, 115.42, 149.47, 121.28, 90.97, 68.57, 213.02, 198.33, 133.27, 126.94, 145.89, 134.49, 211.81, 178.18, 200.45, 82.43, 142.11, 127.65, 86.55, 80.44, 149.56, 108.44, 123.98, 136.82, 112.62, 152.5, 123.17, 156.22, 135.56, 122.0, 127.08, 161.78, 169.7, 93.89, 96.3, 86.67, 79.56, 110.3, 96.32, null, 85.24, 163.88, 100.55, 97.13, 111.35], "\u30ad\u30f3\u30b0\u89b3\u5149\u65b0\u745e\u5e97": [124.44, 102.11, 69.97, 152.83, 112.83, 215.79, 111.15, 86.46, 95.26, 115.82, 127.53, 131.86, 87.38, 40.54, 127.72, 169.51, 138.12, 224.44, 105.09, 129.95, 107.22, 78.06, 72.84, 106.25, 147.12, 70.52, 106.58, 75.84, 69.83, 88.64, 92.05, 100.93, 81.2, 119.12, 114.82, 86.19, 80.12, 101.67, 116.9, 61.08, 150.82, 85.59, 119.4, 111.59, 94.96, 106.21, 131.62, 104.0, 77.92, 108.33, 41.27, 130.0, 170.49, 86.36, 103.2, 53.57, 85.62, 68.28, 114.91, 104.07, 93.37], "\u30ad\u30f3\u30b0\u4f1a\u9928 \u540d\u6771\u5e97": [59.73, 137.85, 53.98, 49.12, 71.68, 54.93, 64.84, 56.96, 20.92, 54.05, 25.51, 27.35, 117.8, 132.42, 20.73, 55.03, 44.84, 17.1, 28.02, 53.9, 13.65, 85.71, 54.39, 23.33, 40.38, 37.61, 0.0, 84.94, 32.59, 38.18, 42.95, 35.33, 85.26, 41.18, 148.38, 13.41, 54.39, 13.56, 69.43, 68.41, 56.31, 72.62, 11.73, 44.63, 31.28, 45.75, 25.42, 64.71, 109.09, 72.22, 57.78, 69.33, 69.62, 67.88, 85.61, 80.0, 63.93, 54.63, 107.25, 77.71, 19.37]};
const scatterData = [{"x": 4.0, "y": 13.33, "date": "2025-10-01"}, {"x": 3.0, "y": 3.67, "date": "2025-10-02"}, {"x": 5.67, "y": 6.33, "date": "2025-10-03"}, {"x": 7.0, "y": 15.33, "date": "2025-10-04"}, {"x": 6.0, "y": 17.0, "date": "2025-10-05"}, {"x": 3.0, "y": 8.33, "date": "2025-10-06"}, {"x": 3.0, "y": 27.67, "date": "2025-10-08"}, {"x": 7.33, "y": 11.67, "date": "2025-10-10"}, {"x": 10.33, "y": 22.33, "date": "2025-10-11"}, {"x": 8.33, "y": 21.67, "date": "2025-10-12"}, {"x": 8.0, "y": 22.0, "date": "2025-10-13"}, {"x": 4.33, "y": 10.33, "date": "2025-10-14"}, {"x": 5.0, "y": 22.67, "date": "2025-10-15"}, {"x": 3.67, "y": 14.67, "date": "2025-10-16"}, {"x": 8.67, "y": 13.33, "date": "2025-10-17"}, {"x": 8.33, "y": 17.0, "date": "2025-10-18"}, {"x": 7.0, "y": 23.33, "date": "2025-10-19"}, {"x": 5.33, "y": 9.5, "date": "2025-10-20"}, {"x": 5.0, "y": 22.33, "date": "2025-10-21"}, {"x": 5.33, "y": 25.0, "date": "2025-10-22"}, {"x": 4.0, "y": 11.67, "date": "2025-10-23"}, {"x": 6.33, "y": 9.0, "date": "2025-10-24"}, {"x": 7.67, "y": 16.33, "date": "2025-10-25"}, {"x": 5.67, "y": 19.33, "date": "2025-10-26"}, {"x": 3.67, "y": 11.67, "date": "2025-10-27"}, {"x": 3.67, "y": 11.33, "date": "2025-10-28"}, {"x": 4.67, "y": 12.67, "date": "2025-10-29"}, {"x": 2.33, "y": 11.0, "date": "2025-10-30"}, {"x": 3.67, "y": 7.0, "date": "2025-10-31"}, {"x": 7.0, "y": 38.0, "date": "2025-11-01"}, {"x": 7.67, "y": 16.0, "date": "2025-11-02"}, {"x": 6.67, "y": 18.33, "date": "2025-11-03"}, {"x": 2.67, "y": 8.5, "date": "2025-11-04"}, {"x": 4.0, "y": 14.33, "date": "2025-11-05"}, {"x": 5.0, "y": 10.0, "date": "2025-11-07"}, {"x": 5.0, "y": 13.67, "date": "2025-11-08"}, {"x": 3.0, "y": 17.67, "date": "2025-11-09"}, {"x": 3.67, "y": 6.33, "date": "2025-11-10"}, {"x": 3.67, "y": 10.0, "date": "2025-11-11"}, {"x": 7.0, "y": 11.0, "date": "2025-11-12"}, {"x": 4.33, "y": 8.0, "date": "2025-11-13"}, {"x": 8.67, "y": 14.0, "date": "2025-11-14"}, {"x": 8.67, "y": 18.67, "date": "2025-11-15"}, {"x": 5.67, "y": 17.0, "date": "2025-11-16"}, {"x": 2.33, "y": 9.67, "date": "2025-11-17"}, {"x": 3.67, "y": 12.0, "date": "2025-11-19"}, {"x": 3.0, "y": 10.0, "date": "2025-11-20"}, {"x": 3.67, "y": 8.0, "date": "2025-11-21"}, {"x": 6.67, "y": 12.67, "date": "2025-11-22"}, {"x": 9.0, "y": 17.33, "date": "2025-11-23"}, {"x": 5.33, "y": 14.67, "date": "2025-11-24"}, {"x": 2.67, "y": 10.0, "date": "2025-11-25"}, {"x": 8.5, "y": 14.0, "date": "2025-11-26"}, {"x": 5.0, "y": 5.67, "date": "2025-11-27"}, {"x": 4.67, "y": 9.67, "date": "2025-11-28"}, {"x": 8.33, "y": 19.67, "date": "2025-11-29"}, {"x": 6.33, "y": 17.0, "date": "2025-11-30"}];

function makeLine(ctx, seriesObj, yTitle) {
  const datasets = Object.keys(seriesObj).map((k) => ({
    label: k,
    data: seriesObj[k],
    tension: 0.25,
    pointRadius: 0,
    borderWidth: 2
  }));

  return new Chart(ctx, {
    type: 'line',
    data: { labels: dates, datasets },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: { mode: 'index', intersect: false },
      plugins: {
        legend: { labels: { color: '#cfe0f7' } }
      },
      scales: {
        x: { ticks: { color: '#8ea0b6', maxRotation: 0, autoSkip: true }, grid: { color: 'rgba(34,48,68,0.35)' } },
        y: { title: { display: true, text: yTitle, color: '#8ea0b6' },
              ticks: { color: '#8ea0b6' },
              grid: { color: 'rgba(34,48,68,0.35)' } }
      }
    }
  });
}

makeLine(document.getElementById('seaCust'), seaCustSeries, '海客数');
makeLine(document.getElementById('seaSupport'), seaSupportSeries, '海支持率(%)');

new Chart(document.getElementById('scatter'), {
  type: 'scatter',
  data: {
    datasets: [{
      label: '自店(海客数) × キャッスル天白(海客数)',
      data: scatterData,
      parsing: false,
      pointRadius: 3
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { labels: { color: '#cfe0f7' } },
      tooltip: {
        callbacks: {
          label: (ctx) => {
            const d = ctx.raw;
            return `${d.date}  自店:${d.x}  キャッスル:${d.y}`;
          }
        }
      }
    },
    scales: {
      x: { title: { display:true, text:'自店（海客数）', color:'#8ea0b6' }, ticks: { color:'#8ea0b6' }, grid: { color: 'rgba(34,48,68,0.35)' } },
      y: { title: { display:true, text:'キャッスル天白（海客数）', color:'#8ea0b6' }, ticks: { color:'#8ea0b6' }, grid: { color: 'rgba(34,48,68,0.35)' } }
    }
  }
});
</script>
</body>
</html>
